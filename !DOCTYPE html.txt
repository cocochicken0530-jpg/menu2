<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>早餐店線上點餐</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1, h2 { margin-top: 30px; }
    .menu-item { display: flex; justify-content: space-between; margin: 5px 0; }
    .menu-item button { margin: 0 5px; }
    #total { font-size: 20px; margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>早餐店線上點餐</h1>

  <h2>吐司類</h2>
  <div class="menu-item" data-name="煎蛋吐司" data-price="25">煎蛋吐司 (25元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="蔥蛋吐司" data-price="30">蔥蛋吐司 (30元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="火腿蛋" data-price="35">火腿蛋 (35元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="起士蛋" data-price="35">起士蛋 (35元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="肉鬆蛋" data-price="35">肉鬆蛋 (35元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="玉米蛋" data-price="35">玉米蛋 (35元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="培根蛋" data-price="40">培根蛋 (40元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="豬肉蛋" data-price="40">豬肉蛋 (40元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="香雞蛋" data-price="40">香雞蛋 (40元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="薯餅蛋" data-price="45">薯餅蛋 (45元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="鮪魚蛋" data-price="45">鮪魚蛋 (45元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="里肌蛋" data-price="45">里肌蛋 (45元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="菲力蛋" data-price="45">菲力蛋 (45元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="香烤雞腿蛋" data-price="55">香烤雞腿蛋 (55元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="原味雞腿蛋" data-price="65">原味雞腿蛋 (65元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="辣味雞腿蛋" data-price="65">辣味雞腿蛋 (65元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="豬肉總匯" data-price="55">豬肉總匯 (55元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="里肌總匯" data-price="60">里肌總匯 (60元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="原味雞腿總匯" data-price="75">原味雞腿總匯 (75元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="辣味雞腿總匯" data-price="75">辣味雞腿總匯 (75元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>

  <h2>漢堡類</h2>
  <div class="menu-item" data-name="豬肉漢堡蛋" data-price="45">豬肉漢堡蛋 (45元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="香雞蛋" data-price="45">香雞蛋 (45元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="里肌蛋" data-price="50">里肌蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="菲力蛋" data-price="50">菲力蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="鮪魚蛋" data-price="50">鮪魚蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="和風蛋" data-price="50">和風蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="照燒蛋" data-price="50">照燒蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="鮮蝦蛋" data-price="50">鮮蝦蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="花枝蛋" data-price="50">花枝蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="鱈魚蛋" data-price="50">鱈魚蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="燻雞蛋" data-price="50">燻雞蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="豬柳蛋" data-price="50">豬柳蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="紐奧良雞肉蛋" data-price="50">紐奧良雞肉蛋 (50元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="香烤雞腿蛋" data-price="60">香烤雞腿蛋 (60元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="厚切洋蔥肉排蛋" data-price="60">厚切洋蔥肉排蛋 (60元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="檸檬雞柳蛋" data-price="60">檸檬雞柳蛋 (60元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="厚切雞排蛋" data-price="65">厚切雞排蛋 (65元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="起士雞排蛋" data-price="65">起士雞排蛋 (65元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="韓式雞腿蛋" data-price="70">韓式雞腿蛋 (70元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="原味雞腿蛋" data-price="70">原味雞腿蛋 (70元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="辣味雞腿蛋" data-price="70">辣味雞腿蛋 (70元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="厚切牛肉蛋" data-price="75">厚切牛肉蛋 (75元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>
  <div class="menu-item" data-name="日式豬排蛋" data-price="75">日式豬排蛋 (75元)
    <div><button onclick="changeQty(this, -1)">-</button><span class="qty">0</span><button onclick="changeQty(this, 1)">+</button></div>
  </div>

  <div id="total">總金額：0</div>
  <button onclick="sendOrder()">送出訂單</button>

  <script>
    // 
    const API_URL = "https://script.google.com/macros/s/AKfycbz_MAq-66UGh0dmqJrBBmJx4l65ALUmliZz8yXKbEwGWZjpMEKeGVZn0sj7c7ceA7QnUA/exec";

    function changeQty(btn, delta) {
      const qtySpan = btn.parentNode.querySelector(".qty");
      let qty = parseInt(qtySpan.textContent);
      qty = Math.max(0, qty + delta);
      qtySpan.textContent = qty;
      updateTotal();
    }

    function updateTotal() {
      let total = 0;
      document.querySelectorAll(".menu-item").forEach(item => {
        const price = parseInt(item.dataset.price);
        const qty = parseInt(item.querySelector(".qty").textContent);
        total += price * qty;
      });
      document.getElementById("total").textContent = "總金額：" + total;
    }

    function sendOrder() {
      let order = [];
      document.querySelectorAll(".menu-item").forEach(item => {
        const name = item.dataset.name;
        const price = parseInt(item.dataset.price);
        const qty = parseInt(item.querySelector(".qty").textContent);
        if (qty > 0) {
          order.push(`${name} x${qty} (${price * qty}元)`);
        }
      });

      if (order.length === 0) {
        alert("請先選擇餐點！");
        return;
      }

      const total = document.getElementById("total").textContent.replace("總金額：", "");

      fetch(API_URL, {
        method: "POST",
        body: JSON.stringify({ order, total }),
        headers: { "Content-Type": "application/json" }
      })
      .then(res => res.text())
      .then(txt => {
        if (txt === "success") {
          alert("✅ 訂單已送出！\n總金額：" + total + " 元");
        } else {
          alert("❌ 訂單失敗：" + txt);
        }
      })
      .catch(err => alert("⚠️ 發生錯誤：" + err));
    }
  </script>
</body>
</html>
